<div class="made-queries-container" fxLayout="row">
  <div id="print-section" class="mt-4 mb-4" fxLayout="column" fxFlex="96" fxFlexOffset="2" fxLayoutGap="1rem">
    <app-filter-common-report
      [filterView] = "filtersActive"
      [allUsers]= "allUser"
      [allCategories]="categories"
      [subjects]="subjects"
      [provinces]="allProvincesByName"
      (eventChangeUser)="onUserIdReceived($event)"
      (eventChangeStartDate)="onStartDateReceived($event)"
      (eventChangeEndDate)="onEndDateReceived($event)"
      (eventEmitCategoryId)="onCategoryIdReceived($event)"
      (eventEmitSubjectId)="onSubjectIdeReceived($event)"
      (eventEmitRegion)="onRegionReceived($event)"></app-filter-common-report>
    <div class="middle-content-dashboard" *ngIf="!showMiddleContentFilter" fxLayout="row" fxLayoutAlign="space-between start" fxLayoutGap="1rem">
      <mat-card fxFlex="60" class="query-made-graphs-card">
        <mat-card-content>
          <app-line-graphs-queries
            [labels]="labelsData"
            [data]="chartData"
            (eventEmitTabChange)="onChange($event)"
            (eventEmitFilter)="onFilterEmittedAction($event)">
          </app-line-graphs-queries>
        </mat-card-content>
      </mat-card>
      <mat-card fxFlex="40" class="regional-map">
        <mat-card-content>
          <app-cuban-regional-map-queries
            [data]="aux"
          ></app-cuban-regional-map-queries>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="middle-content-filter" *ngIf="showMiddleContentFilter" >
      <mat-card>
        <mat-card-content>
          <app-line-graphs-queries
            [labels]="labelsData"
            [data]="chartData"
            [updatedDate]="date"
            (eventEmitTabChange)="onChange($event)"
            (eventEmitFilter)="onFilterEmittedAction($event)">
          </app-line-graphs-queries>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="bottom-content" fxLayout="row">
      <mat-card class="w-100 table">
        <mat-card-content>
          <div class="information-table" fxLayout="column">
            <div class="action-btns" fxLayout=row fxLayoutAlign="space-between center">
              <button class="left-btn" mat-icon-button>
                <mat-icon>update</mat-icon>
              </button>
              <div class="rigth-btn" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap=".5rem">
                <button class="one" mat-icon-button>
                  <mat-icon>star</mat-icon>
                </button>
                <button class="two" mat-icon-button>
                  <mat-icon>share</mat-icon>
                </button>
                <button class="thre" mat-icon-button (click)="onPrint()">
                  <mat-icon>print</mat-icon>
                </button>
                <button class="thre" mat-icon-button>
                  <mat-icon>star</mat-icon>
                </button>
              </div>
            </div>
            <div class="table-container">
              <table mat-table [dataSource]="dataSource" class="table-made-queries w-100">

                <!-- Checkbox Column -->
                <ng-container matColumnDef="select">
                  <th mat-header-cell *matHeaderCellDef>
                    <mat-checkbox (change)="$event ? masterToggle() : null"
                      [checked]="selection.hasValue() && isAllSelected()"
                      [indeterminate]="selection.hasValue() && !isAllSelected()" color="primary">
                    </mat-checkbox>
                  </th>
                  <td mat-cell *matCellDef="let row">
                    <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                      [checked]="selection.isSelected(row)" (click)="checkBoxSelected(row)" color="primary">
                    </mat-checkbox>
                  </td>
                </ng-container>

                <!-- date Column -->
                <ng-container matColumnDef="date">
                  <th mat-header-cell *matHeaderCellDef class="header"> Fecha </th>
                  <td mat-cell *matCellDef="let element">
                    {{element.date}}
                  </td>
                </ng-container>
                <!-- Region Column -->
                <ng-container matColumnDef="region">
                  <th mat-header-cell *matHeaderCellDef class="header"> Region </th>
                  <td mat-cell *matCellDef="let element">
                    {{element.provinces}}
                  </td>
                </ng-container>


                <!-- Teach Type Column -->
                <ng-container matColumnDef="category">
                  <th mat-header-cell *matHeaderCellDef class="header"> Enseñanza </th>
                  <td mat-cell *matCellDef="let element">
                   {{element.category}}
                  </td>
                </ng-container>

                <!-- Teach Type Column -->
                <ng-container matColumnDef="subject">
                  <th mat-header-cell *matHeaderCellDef class="header"> Categoría </th>
                  <td mat-cell *matCellDef="let element">
                   {{element.subjects}}
                  </td>
                </ng-container>

                <!-- User Column -->
                <ng-container matColumnDef="user">
                  <th mat-header-cell *matHeaderCellDef class="header"> Usuario </th>
                  <td mat-cell *matCellDef="let element">
                    {{element.specialist}}
                  </td>
                </ng-container>

                <!-- Total Queries Column -->
                <ng-container matColumnDef="totalQueries">
                  <th mat-header-cell *matHeaderCellDef class="header"> Total de Consultas </th>
                  <td mat-cell *matCellDef="let element">{{element.total}}</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)">
                </tr>
              </table>
            </div>
            <mat-paginator [length]="query.total" [pageSize]="query.limit" [pageSizeOptions]="pageSizeOptions"
              (page)="pageEvent = paginateData($event)" showFirstLastButtons></mat-paginator>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
